{"version":3,"file":"bundle.cjs.js","sources":["../src/index.js"],"sourcesContent":["async function invokeCallback(done) {\n  process.nextTick(done);\n}\n\nfunction lift() {\n  let beforeShutdown = this.config.beforeShutdown || invokeCallback;\n  process.on('SIGINT', async () => {\n    this.logger.info('Shutting down...');\n    let startTime = Date.now();\n\n    let err;\n    try {\n      await beforeShutdown();\n      this.logger.info(`Shuted down...(in ${Date.now() - startTime}ms)`);\n    }\n    catch (e) {\n      err = e;\n    }\n\n    this.lower().on('lowered', () => {\n      process.exit(err ? 1 : 0);\n    });\n  });\n\n  return new Promise((resolve) => {\n    resolve();\n  });\n}\n\nexport default lift;\n"],"names":["invokeCallback","done","nextTick","lift","beforeShutdown","config","on","logger","info","startTime","Date","now","err","e","lower","exit","Promise","resolve"],"mappings":";;AAAA,eAAeA,cAAf,CAA8BC,IAA9B,EAAoC;UAC1BC,QAAR,CAAiBD,IAAjB;;;AAGF,SAASE,IAAT,GAAgB;MACVC,iBAAiB,KAAKC,MAAL,CAAYD,cAAZ,IAA8BJ,cAAnD;UACQM,EAAR,CAAW,QAAX,EAAqB,YAAY;SAC1BC,MAAL,CAAYC,IAAZ,CAAiB,kBAAjB;QACIC,YAAYC,KAAKC,GAAL,EAAhB;QAEIC,GAAJ;;QACI;YACIR,gBAAN;WACKG,MAAL,CAAYC,IAAZ,CAAkB,qBAAoBE,KAAKC,GAAL,KAAaF,SAAU,KAA7D;KAFF,CAIA,OAAOI,CAAP,EAAU;YACFA,CAAN;;;SAGGC,KAAL,GAAaR,EAAb,CAAgB,SAAhB,EAA2B,MAAM;cACvBS,IAAR,CAAaH,MAAM,CAAN,GAAU,CAAvB;KADF;GAbF;SAkBO,IAAII,OAAJ,CAAaC,OAAD,IAAa;;GAAzB,CAAP;;;;;"}